{
  "type": "object",
  "if": {
    "properties": {
      "type": {
        "const": "optimization_start"
      }
    }
  },
  "then": {
    "required": [
      "type",
      "optimization_id",
      "optimization",
      "data"
    ]
  },
  "else": {
    "required": [
      "type",
      "optimization_id"
    ]
  },
  "properties": {
    "type": {
      "enum": [
        "optimization_start",
        "optimization_stop"
      ]
    },
    "version": {
      "type": "string"
    },
    "optimization_id": {
      "type": "string"
    },
    "optimization": {
      "type": "object",
      "required": [
        "parameters",
        "objectives",
        "objects"
      ],
      "properties": {
        "parameters": {
          "type": "object",
          "if": {
            "properties": {
              "method": {
                "const": "GA"
              }
            }
          },
          "then": {
            "required": [
              "method",
              "ngen",
              "pop_size",
              "mutpb",
              "cxpb",
              "eta",
              "diversity_flg",
              "qbound"
            ]
          },
          "else": {
            "required": [
              "method",
              "maxf",
              "xtol",
              "ftol"
            ]
          },
          "properties": {
            "method": {
              "enum": [
                "GA",
                "Simplex"
              ]
            },
            "ngen": {
              "type": "integer",
              "minimum": 0,
              "maximum": 500
            },
            "pop_size": {
              "type": "integer",
              "minimum": 0,
              "maximum": 500
            },
            "mutpb": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "cxpb": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "eta": {
              "type": "number",
              "minimum": 0
            },
            "indpb": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "diversity_flg": {
              "type": "boolean"
            },
            "ncls": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "qbound": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        },
        "objectives": {
          "type": "array",
          "minItems": 1,
          "required": [
            "type",
            "summary_method",
            "weight",
            "penalty_value",
            "location"
          ],
          "items": {
            "type": "object",
            "required": [
              "type",
              "summary_method",
              "weight",
              "penalty_value",
              "location"
            ],
            "properties": {
              "type": {
                "enum": [
                  "head",
                  "concentration",
                  "distance",
                  "flux",
                  "input_concentration"
                ]
              },
              "conc_file_name": {
                "type": "string"
              },
              "summary_method": {
                "enum": [
                  "min",
                  "max",
                  "mean"
                ]
              },
              "weight": {
                "type": "number"
              },
              "penalty_value": {
                "type": "number"
              },
              "location": {
                "type": "object"
              }
            }
          }
        },
        "constraints": {
          "type": "array",
          "required": [
            "type",
            "summary_method",
            "weight",
            "penalty_value",
            "location"
          ],
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "head",
                  "concentration",
                  "distance",
                  "flux",
                  "input_concentration"
                ]
              },
              "conc_file_name": {
                "type": "string"
              },
              "summary_method": {
                "enum": [
                  "min",
                  "max",
                  "mean"
                ]
              },
              "operator": {
                "enum": [
                  "more",
                  "less"
                ]
              },
              "value": {
                "type": "number"
              },
              "location": {
                "type": "object"
              }
            }
          }
        },
        "objects": {
          "type": "array",
          "required": [
            "id",
            "type",
            "position",
            "flux"
          ],
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "type": {
                "enum": [
                  "wel"
                ]
              },
              "position": {
                "type": "object"
              },
              "flux": {
                "type": "object"
              },
              "concentration": {
                "type": "object"
              }
            }
          }
        }
      }
    },
    "data": {
      "type": "object",
      "required": [
        "mf"
      ],
      "properties": {
        "mf": {
          "type": "object"
        },
        "mt": {
          "type": "object"
        }
      }
    }
  }
}